{
  "camera_settings": {
    "default_frame_interval": 30,
    "default_fps": 1.0,
    "video_patterns": {
      "gopro": "GX*.MP4",
      "generic": "*.mp4"
    },
    "output_codec": "mp4v",
    "gaussian_blur": [21, 21],
    "motion_threshold": 25
  },
  "peak_detection": {
    "window_minutes": 15,
    "motion_threshold": 25,
    "blur_size": [21, 21],
    "min_frames_for_analysis": 2
  },
  "video_processing": {
    "supported_formats": [".mp4", ".MP4", ".avi", ".mov"],
    "max_file_size_mb": 10000,
    "temp_cleanup": true
  },
  "logging": {
    "level": "INFO",
    "file_output": true,
    "console_output": true,
    "log_rotation": true,
    "max_log_size_mb": 100
  },
  "output": {
    "save_metadata": true,
    "create_visualizations": true,
    "export_formats": ["json", "csv", "xml"],
    "compress_output": false
  },
  "performance": {
    "use_gpu": true,
    "batch_size": 1,
    "memory_limit_mb": 8192,
    "parallel_processing": false
  },
  "detection_tuning": {
    "adaptive_confidence": true,
    "confidence_floor": 0.3,
    "confidence_ceiling": 0.7,
    "nms_adaptive": true,
    "size_filter_adaptive": true,
    "temporal_smoothing": 0.1,
    "scene_analysis_window": 60,
    "gopro_fov_degrees": 120.0,
    "enable_edge_compensation": true,
    "mass_motion_min_quality": 0.4,
    "stage1": {
      "enabled": true,
      "adaptive_confidence": true,
      "temporal_smoothing": 0.15,
      "scene_analysis_window": 30,
      "update_interval": 15,
      "lightweight_mode": true
    },
    "stage2": {
      "enabled": true,
      "adaptive_confidence": true,
      "temporal_smoothing": 0.08,
      "scene_analysis_window": 90,
      "update_interval": 10,
      "lightweight_mode": false,
      "mass_motion_quality_enforcement": true
    }
  },
  "preprocessing": {
    "enabled": true,
    "methods": {
      "clahe": {
        "enabled": true,
        "clipLimit": 2.0,
        "tileGridSize": [8, 8]
      },
      "gamma_correction": {
        "enabled": true,
        "gamma": 1.2
      },
      "bilateral_filter": {
        "enabled": false,
        "d": 9,
        "sigmaColor": 75.0,
        "sigmaSpace": 75.0
      },
      "lab_enhancement": {
        "enabled": false,
        "luminance_boost": 1.1
      },
      "glare_reduction": {
        "enabled": false,
        "threshold": 240,
        "reduction_factor": 0.7
      }
    },
    "graybar_presets": {
      "low_light": {
        "description": "Early morning/evening with low natural light",
        "clahe": {"enabled": true, "clipLimit": 3.0, "tileGridSize": [8, 8]},
        "gamma_correction": {"enabled": true, "gamma": 1.3},
        "bilateral_filter": {"enabled": true, "d": 9, "sigmaColor": 75.0, "sigmaSpace": 75.0},
        "lab_enhancement": {"enabled": true, "luminance_boost": 1.1},
        "glare_reduction": {"enabled": true, "threshold": 240, "reduction_factor": 0.7}
      },
      "mixed_lighting": {
        "description": "Daytime with natural + artificial light mixing",
        "clahe": {"enabled": true, "clipLimit": 2.5, "tileGridSize": [8, 8]},
        "gamma_correction": {"enabled": true, "gamma": 1.2},
        "bilateral_filter": {"enabled": false},
        "lab_enhancement": {"enabled": true, "luminance_boost": 1.1},
        "glare_reduction": {"enabled": true, "threshold": 240, "reduction_factor": 0.7}
      },
      "high_density": {
        "description": "Peak rush hours - optimize for speed and accuracy",
        "clahe": {"enabled": true, "clipLimit": 2.0, "tileGridSize": [8, 8]},
        "gamma_correction": {"enabled": false},
        "bilateral_filter": {"enabled": false},
        "lab_enhancement": {"enabled": true, "luminance_boost": 1.05},
        "glare_reduction": {"enabled": true, "threshold": 240, "reduction_factor": 0.7}
      },
      "balanced": {
        "description": "Default balanced configuration for most conditions - RECOMMENDED: CLAHE_Gamma (tested, +43.8% detections)",
        "clahe": {"enabled": true, "clipLimit": 2.0, "tileGridSize": [8, 8]},
        "gamma_correction": {"enabled": true, "gamma": 1.2},
        "bilateral_filter": {"enabled": false},
        "lab_enhancement": {"enabled": false},
        "glare_reduction": {"enabled": false}
      }
    }
  }
}
